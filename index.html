<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Quest Info</title>
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#0c1b25" />
<style>
  :root{
    --bg:#0d2530;
    --panel:#163341;
    --panel-alt:#112731;
    --text:#cfe8ef;
    --muted:#8fb1bd;
    --accent:#a7d8e8;
    --glow: rgba(167,216,232,.35);
    --check:#21d48f;
  }
  html,body{height:100%;}
  body{
    margin:0;
    background: radial-gradient(1200px 800px at 50% 20%, #183949 0%, #0c1b25 60%);
    color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    letter-spacing:.3px;
  }
  .wrap{
    max-width: 720px;
    margin: 40px auto;
    padding: 24px;
  }
  /* Header bar */
  .bar{
    display:flex;
    align-items:center;
    gap:12px;
    width: fit-content;
    padding: 10px 18px;
    border:1px solid rgba(255,255,255,.15);
    border-radius:10px;
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
    box-shadow: 0 0 0 1px rgba(255,255,255,.05) inset, 0 10px 30px rgba(0,0,0,.25);
  }
  .bang{
    width:26px;height:26px;border:2px solid rgba(255,255,255,.5);border-radius:50%;
    display:grid;place-items:center;color:rgba(255,255,255,.8);font-weight:700;
  }
  .hdr{
    font-weight:700; letter-spacing:2px;
    color:#e2f5ff; opacity:.9;
  }
  .sub{
    margin:18px 0 30px;
    color:var(--muted);
    opacity:.95;
  }
  .goal-title{
    text-align:center;
    font-weight:800;
    letter-spacing:3px;
    color:#e7f7ff;
    text-shadow:0 0 18px var(--glow);
  }
  .goal-title span{
    display:inline-block;
    border-bottom:3px solid rgba(255,255,255,.35);
    padding-bottom:4px;
  }
  .list{
    margin-top:22px;
    display:grid;
    gap:10px;
  }
  .row{
    display:grid;
    grid-template-columns: 1fr auto auto;
    align-items:center;
    gap:12px;
    padding:12px 16px;
    border-radius:8px;
  }
  .row.dim{ background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.08)); }
  .row.highlight{ background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(255,255,255,.06)); }
  .label{ color:#cfe8ef; }
  .count{ color:#b7d3db; font-family: ui-monospace, SFMono-Regular, Menlo, monospace;}
  .check{
    width:24px;height:24px;border-radius:4px;
    border:2px solid rgba(255,255,255,.35);
    display:grid;place-items:center;
    cursor:pointer;
    transition:all .15s ease;
    background: rgba(0,0,0,.05);
  }
  .check[data-checked="true"]{
    border-color: rgba(33, 212, 143, .8);
    background: rgba(33, 212, 143, .2);
    box-shadow: 0 0 0 2px rgba(33,212,143,.2);
  }
  .tick{
    width:12px;height:12px; border-right:3px solid var(--check); border-bottom:3px solid var(--check);
    transform: rotate(45deg) translate(-1px, -2px);
    display:none;
  }
  .check[data-checked="true"] .tick{ display:block; }
  .footer{
    margin-top:22px;
    color: #82a4b0;
    font-size: 12px;
    text-align:center;
    opacity:.8;
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="bar">
      <div class="bang">!</div>
      <div class="hdr">QUEST INFO</div>
    </div>

    <div class="sub">[Daily Quest: Strength Training has arrived.]</div>

    <h2 class="goal-title"><span>GOAL</span></h2>

    <div class="list" id="taskList">
      <!-- rows injected by JS -->
    </div>

    <div class="footer">Progress saves for today and resets automatically each day. Tap the boxes to check/uncheck.</div>
  </div>

<script>
  const STORAGE_KEY = 'quest-ui-state-v1';
  const todayKey = () => new Date().toISOString().slice(0,10);

  const TASKS = [
    { id:'pushups', label:'Push-ups', unit:'reps', target:100, completed: false, style:'dim' },
    { id:'situps',  label:'Sit-ups',  unit:'reps', target:100, completed: false, style:'dim' },
    { id:'squats',  label:'Squats',  unit:'reps', target:100, completed: false, style:'dim' },
    { id:'running', label:'Running', unit:'km', target:5,   completed: false, style:'highlight' },
  ];

  function load(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return { date: todayKey(), data: TASKS };
      const parsed = JSON.parse(raw);
      if(parsed.date !== todayKey()){
        // new day -> reset to defaults
        return { date: todayKey(), data: TASKS };
      }
      return parsed;
    }catch(e){
      return { date: todayKey(), data: TASKS };
    }
  }

  function save(state){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }

  function render(){
    const container = document.getElementById('taskList');
    container.innerHTML = '';
    state.data.forEach(t => {
      const row = document.createElement('div');
      row.className = 'row ' + (t.style || 'dim');

      const label = document.createElement('div');
      label.className = 'label';
      label.textContent = t.label;

      const count = document.createElement('div');
      count.className = 'count';
      const current = t.completed ? (t.unit === 'km' ? `${t.target}/${t.target}${t.unit}` : `[${t.target}/${t.target}]`) : (t.unit === 'km' ? `0/${t.target}${t.unit}` : `[0/${t.target}]`);
      count.textContent = current;

      const box = document.createElement('div');
      box.className = 'check';
      box.setAttribute('data-checked', t.completed ? 'true' : 'false');
      const tick = document.createElement('div');
      tick.className = 'tick';
      box.appendChild(tick);

      box.addEventListener('click', () => {
        t.completed = !t.completed;
        save(state);
        render();
      });

      row.appendChild(label);
      row.appendChild(count);
      row.appendChild(box);
      container.appendChild(row);
    });
  }

  let state = load();
  render();
  save(state);

  // Register service worker for PWA
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js');
    });
  }
</script>
</body>
</html>
